{% extends 'accounts/home.html' %}
{% load static %}

{% block content %}
<style>
    .quarterly-container {
        padding: 30px;
        font-family: Arial, sans-serif;
    }

    .quarterly-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .quarterly-actions {
        text-align: center;
        margin-bottom: 20px;
    }

    .quarterly-actions a {
        margin: 0 10px;
        padding: 8px 15px;
        background-color: #4CAF50;
        color: white;
        text-decoration: none;
        border-radius: 4px;
    }

    .quarterly-actions a:hover {
        background-color: #388e3c;
    }

    .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
        table-layout: fixed;
        min-width: 1000px; /* ensures horizontal scroll on small screens */
    }

    th, td {
        border: 1px solid black;
        padding: 6px;
        text-align: center;
        vertical-align: middle;
        word-wrap: break-word;
    }

    th {
        background-color: #e0e0e0;
        font-weight: bold;
    }

    .beneficiary-header {
        background-color: #e0e0e0;
        font-weight: bold;
    }

    .no-projects {
        text-align: center;
        font-style: italic;
        color: #999;
    }

    /* Media Queries for smaller screen sizes */
    @media (max-width: 1200px) {
        .quarterly-header h2 {
            font-size: 24px;
        }

        .quarterly-actions a {
            font-size: 14px;
            padding: 8px 12px;
        }
    }

    @media (max-width: 992px) {
        .quarterly-header h2 {
            font-size: 22px;
        }

        .quarterly-actions a {
            font-size: 12px;
            padding: 8px 10px;
        }

        th, td {
            padding: 5px;
        }

        .quarterly-actions {
            margin-bottom: 15px;
        }
    }

    @media (max-width: 768px) {
        .quarterly-container {
            padding: 20px;
        }

        .quarterly-header h2 {
            font-size: 20px;
        }

        .quarterly-actions a {
            font-size: 12px;
            padding: 6px 10px;
        }

        table {
            font-size: 10px;
        }

        th, td {
            padding: 4px;
        }

        .beneficiary-header {
            font-size: 10px;
        }

        .no-projects {
            font-size: 12px;
        }
    }

    @media (max-width: 480px) {
        .quarterly-container {
            padding: 15px;
        }

        .quarterly-header h2 {
            font-size: 18px;
        }

        .quarterly-actions a {
            font-size: 10px;
            padding: 6px 8px;
        }

        table {
            font-size: 9px;
        }

        th, td {
            padding: 3px;
        }

        .no-projects {
            font-size: 10px;
        }
    }
</style>

<div class="quarterly-container">
    <div class="quarterly-header">
        <h2>QUARTERLY REPORT<br>{{ report.get_quarter_display }}, Year {{ report.year }}</h2>
    </div>

    <div class="quarterly-actions">
        <a href="{% url 'add_extension_project' report.id %}">Add Project</a>
        <a href="{% url 'generate_quarterly_pdf' report.id %}" target="_blank">View PDF</a>
    </div>

    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th rowspan="2">TITLE OF PROJECTS/TRAININGS</th>
                    <th rowspan="2">DATE</th>
                    <th rowspan="2">DURATION<br>(no. of hrs.)</th>
                    <th rowspan="2">SECTOR</th>
                    <th colspan="3">BENEFICIARIES</th>
                    <th rowspan="2">LOCATION /<br>AREA</th>
                    <th rowspan="2">DEPARTMENT /<br>PERSONS RESPONSIBLE</th>
                    <th rowspan="2">BUDGET<br>ALLOCATION</th>
                    <th rowspan="2">REMARKS</th>
                    <th rowspan="2">ACTION</th>
                </tr>
                <tr class="beneficiary-header">
                    <th>Target No.</th>
                    <th>Actual No. M</th>
                    <th>Actual No. F</th>
                </tr>
            </thead>
            <tbody>
                {% for project in projects %}
                <tr>
                    <td>{{ project.title }}</td>
                    <td>{{ project.date }}</td>
                    <td>{{ project.duration_hours }}</td>
                    <td>{{ project.sector }}</td>
                    <td>{{ project.target_no }}</td>
                    <td>{{ project.actual_male }}</td>
                    <td>{{ project.actual_female }}</td>
                    <td>{{ project.location }}</td>
                    <td>{{ project.persons_responsible }}</td>
                    <td>{{ project.budget_allocation|floatformat:2 }}</td>
                    <td>{{ project.remarks }}</td>
                    <td>
                        <a href="{% url 'edit_extension_project' project.id %}" class="btn btn-warning">Edit</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="12" class="no-projects">No projects found for this quarter.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
